# MetroPulse - FAQ (–ß–∞—Å—Ç–æ –∑–∞–¥–∞–≤–∞–µ–º—ã–µ –≤–æ–ø—Ä–æ—Å—ã)

## –û–±—â–∏–µ –≤–æ–ø—Ä–æ—Å—ã

### Q1: –ü–æ—á–µ–º—É –≤—ã–±—Ä–∞–Ω–∞ –º–µ—Ç–æ–¥–æ–ª–æ–≥–∏—è Kimball, –∞ –Ω–µ Data Vault?

**–û—Ç–≤–µ—Ç**: 
–í—ã–±–æ—Ä –æ–±—É—Å–ª–æ–≤–ª–µ–Ω —Å–ø–µ—Ü–∏—Ñ–∏–∫–æ–π —Å—Ç–∞—Ä—Ç–∞–ø–∞:
1. **–°–∫–æ—Ä–æ—Å—Ç—å –≤–Ω–µ–¥—Ä–µ–Ω–∏—è**: Kimball –ø–æ–∑–≤–æ–ª—è–µ—Ç –±—ã—Å—Ç—Ä–æ —Å–æ–∑–¥–∞—Ç—å MVP (2-3 —Å–ø—Ä–∏–Ω—Ç–∞ vs 6+ –º–µ—Å—è—Ü–µ–≤ –¥–ª—è DV)
2. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: –°—Ö–µ–º–∞ "–∑–≤–µ–∑–¥–∞" –æ–ø—Ç–∏–º–∞–ª—å–Ω–∞ –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ - –º–µ–Ω—å—à–µ JOIN'–æ–≤
3. **–ü–æ–Ω—è—Ç–Ω–æ—Å—Ç—å**: –ë–∏–∑–Ω–µ—Å-–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –ª–µ–≥–∫–æ –ø–æ–Ω–∏–º–∞—é—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É Star Schema
4. **–î–æ—Å—Ç–∞—Ç–æ—á–Ω–∞—è –≥–∏–±–∫–æ—Å—Ç—å**: SCD Type 2 –ø–æ–∫—Ä—ã–≤–∞–µ—Ç —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –∏—Å—Ç–æ—Ä–∏–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π

Data Vault –∏–º–µ–µ—Ç —Å–º—ã—Å–ª –¥–ª—è:
- –ö—Ä—É–ø–Ω—ã—Ö enterprise –∫–æ–º–ø–∞–Ω–∏–π
- –ö–æ–≥–¥–∞ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–∞–Ω–Ω—ã—Ö —á–∞—Å—Ç–æ –º–µ–Ω—è—é—Ç—Å—è
- –ö–æ–≥–¥–∞ –Ω—É–∂–µ–Ω –ø–æ–ª–Ω—ã–π audit trail –≤—Å–µ—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π
- –î–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–µ –ø—Ä–æ–µ–∫—Ç—ã (3+ –≥–æ–¥–∞)

### Q2: –ü–æ—á–µ–º—É PostgreSQL, –∞ –Ω–µ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ MPP —Ä–µ—à–µ–Ω–∏–µ (Greenplum, Snowflake)?

**–û—Ç–≤–µ—Ç**:
–î–ª—è MVP –∏ —Ç–µ–∫—É—â–∏—Ö –æ–±—ä–µ–º–æ–≤ –¥–∞–Ω–Ω—ã—Ö PostgreSQL –¥–æ—Å—Ç–∞—Ç–æ—á–µ–Ω:
- **–û–±—ä–µ–º—ã**: ~500K –∑–∞–ø–∏—Å–µ–π/–¥–µ–Ω—å —É–∫–ª–∞–¥—ã–≤–∞—é—Ç—Å—è –≤ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ PostgreSQL
- **–°—Ç–æ–∏–º–æ—Å—Ç—å**: PostgreSQL –±–µ—Å–ø–ª–∞—Ç–µ–Ω, Snowflake/Databricks - –¥–æ—Ä–æ–≥–∏–µ
- **–ü—Ä–æ—Å—Ç–æ—Ç–∞**: –ú–µ–Ω—å—à–µ –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–π —Å–ª–æ–∂–Ω–æ—Å—Ç–∏
- **–ú–∏–≥—Ä–∞—Ü–∏—è**: Greenplum —Å–æ–≤–º–µ—Å—Ç–∏–º —Å PostgreSQL - –ª–µ–≥–∫–æ –º–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å

**–ü–ª–∞–Ω –º–∏–≥—Ä–∞—Ü–∏–∏**:
- –ü—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ 10M+ –∑–∞–ø–∏—Å–µ–π/–¥–µ–Ω—å ‚Üí Greenplum
- –ü—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ 100M+ –∑–∞–ø–∏—Å–µ–π/–¥–µ–Ω—å ‚Üí Snowflake –∏–ª–∏ Databricks

---

## –í–æ–ø—Ä–æ—Å—ã –ø–æ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ

### Q3: –ó–∞—á–µ–º –Ω—É–∂–µ–Ω —Å–ª–æ–π Staging, –µ—Å–ª–∏ –µ—Å—Ç—å –ø—Ä—è–º–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –∏–∑ OLTP?

**–û—Ç–≤–µ—Ç**:
Staging –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–µ–Ω:
1. **–ò–∑–æ–ª—è—Ü–∏—è**: –ù–µ –Ω–∞–≥—Ä—É–∂–∞–µ–º OLTP –±–∞–∑—É —Å–ª–æ–∂–Ω—ã–º–∏ –∑–∞–ø—Ä–æ—Å–∞–º–∏
2. **–ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞**: –ú–æ–∂–µ–º –ø–æ–≤—Ç–æ—Ä–∏—Ç—å –∑–∞–≥—Ä—É–∑–∫—É –ø—Ä–∏ –æ—à–∏–±–∫–µ
3. **–ò—Å—Ç–æ—Ä–∏—è**: –°–æ—Ö—Ä–∞–Ω—è–µ–º —Å—ã—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –∞—É–¥–∏—Ç–∞
4. **–¢—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–∏**: Staging ‚Üí DWH –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–ª–æ–∂–Ω—ã–µ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è
5. **–ò—Å—Ç–æ—á–Ω–∏–∫–∏**: –£–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –∏–∑ —Ä–∞–∑–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ (OLTP, Kafka, API)

### Q4: –ü–æ—á–µ–º—É SCD Type 2 —Ç–æ–ª—å–∫–æ –¥–ª—è dim_route, –∞ –Ω–µ –¥–ª—è –≤—Å–µ—Ö –∏–∑–º–µ—Ä–µ–Ω–∏–π?

**–û—Ç–≤–µ—Ç**:
SCD Type 2 –¥–æ–±–∞–≤–ª—è–µ—Ç —Å–ª–æ–∂–Ω–æ—Å—Ç—å –∏ overhead:
- **dim_route**: –ö—Ä–∏—Ç–∏—á–Ω–æ - –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ç–∞—Ä–∏—Ñ–∞ –≤–ª–∏—è–µ—Ç –Ω–∞ –∞–Ω–∞–ª–∏–∑ –≤—ã—Ä—É—á–∫–∏
- **dim_user**: SCD Type 1 –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ - —Ç–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å –≤–∞–∂–Ω–µ–µ –∏—Å—Ç–æ—Ä–∏–∏
- **dim_station**: –†–µ–¥–∫–æ –º–µ–Ω—è—é—Ç—Å—è - –Ω–µ –Ω—É–∂–Ω–∞ –∏—Å—Ç–æ—Ä–∏—è
- **dim_vehicle**: –ò—Å—Ç–æ—Ä–∏—è —Ç–µ—Ö–æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–∞ –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏

**–ü—Ä–∏–Ω—Ü–∏–ø**: SCD Type 2 —Ç–æ–ª—å–∫–æ –¥–ª—è –∏–∑–º–µ—Ä–µ–Ω–∏–π, –≥–¥–µ –∏—Å—Ç–æ—Ä–∏—è –∫—Ä–∏—Ç–∏—á–Ω–∞ –¥–ª—è –±–∏–∑–Ω–µ—Å-—Ä–µ—à–µ–Ω–∏–π.

### Q5: –ü–æ—á–µ–º—É —Ñ–∞–∫—Ç—ã –Ω–µ –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω—ã (–µ—Å—Ç—å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö)?

**–û—Ç–≤–µ—Ç**:
–í DWH –¥–µ–Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è - —ç—Ç–æ –Ω–æ—Ä–º–∞:
1. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: –ú–µ–Ω—å—à–µ JOIN'–æ–≤ = –±—ã—Å—Ç—Ä–µ–µ –∑–∞–ø—Ä–æ—Å—ã
2. **Degenerate Dimensions**: transaction_id, trip_status —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ —Ñ–∞–∫—Ç–∞—Ö
3. **Snapshot Facts**: –§–∞–∫—Ç - —ç—Ç–æ —Å–Ω–∏–º–æ–∫ —Å–æ—Å—Ç–æ—è–Ω–∏—è –≤ –º–æ–º–µ–Ω—Ç –≤—Ä–µ–º–µ–Ω–∏
4. **Read-optimized**: DWH –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω –¥–ª—è —á—Ç–µ–Ω–∏—è, –Ω–µ –¥–ª—è –∑–∞–ø–∏—Å–∏

---

## –í–æ–ø—Ä–æ—Å—ã –ø–æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### Q6: –ü–æ—á–µ–º—É –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω Airflow –¥–ª—è –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏–∏?

**–û—Ç–≤–µ—Ç**:
Airflow –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –∏–∑-–∑–∞ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –≤—Ä–µ–º–µ–Ω–∏:
- **–§–æ–∫—É—Å**: –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –Ω–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ DWH –∏ ETL –ª–æ–≥–∏–∫–µ
- **–°–ª–æ–∂–Ω–æ—Å—Ç—å**: Airflow —Ç—Ä–µ–±—É–µ—Ç –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- **MVP**: –î–ª—è –ø—Ä–æ—Ç–æ—Ç–∏–ø–∞ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Ä—É—á–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ —Å–∫—Ä–∏–ø—Ç–æ–≤

**–í production –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –Ω—É–∂–µ–Ω**:
- –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –∑–∞–ø—É—Å–∫–∞ ETL
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏ –º–µ–∂–¥—É –∑–∞–¥–∞—á–∞–º–∏
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –∞–ª–µ—Ä—Ç—ã
- –ü–æ–≤—Ç–æ—Ä–Ω—ã–π –∑–∞–ø—É—Å–∫ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö

### Q7: –ö–∞–∫ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –æ—à–∏–±–∫–∏ –≤ ETL pipeline?

**–û—Ç–≤–µ—Ç**:
–¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è:
1. **Try-catch –±–ª–æ–∫–∏**: –ü–µ—Ä–µ—Ö–≤–∞—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏–π –≤ Python
2. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**: –î–µ—Ç–∞–ª—å–Ω—ã–µ –ª–æ–≥–∏ —á–µ—Ä–µ–∑ logging
3. **Staging control**: –¢–∞–±–ª–∏—Ü–∞ `staging.load_control` –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è
4. **Rollback**: –ü—Ä–∏ –æ—à–∏–±–∫–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –æ—Ç–∫–∞—Ç—ã–≤–∞–µ—Ç—Å—è

**–£–ª—É—á—à–µ–Ω–∏—è –¥–ª—è production**:
- Dead Letter Queue –¥–ª—è –ø—Ä–æ–±–ª–µ–º–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π
- Email/Slack –∞–ª–µ—Ä—Ç—ã –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π retry —Å exponential backoff
- Circuit breaker –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç cascade failures

### Q8: –ö–∞–∫ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç—Å—è —Ä–µ—à–µ–Ω–∏–µ –ø—Ä–∏ —Ä–æ—Å—Ç–µ –¥–∞–Ω–Ω—ã—Ö?

**–û—Ç–≤–µ—Ç**:
**–í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ** (–¥–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–≥–æ –ø—Ä–µ–¥–µ–ª–∞):
- –£–≤–µ–ª–∏—á–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏–Ω–¥–µ–∫—Å–æ–≤ –∏ –ø–∞—Ä—Ç–∏—Ü–∏–π
- Materialized Views –¥–ª—è —á–∞—Å—Ç—ãÔøΩÔøΩ –∑–∞–ø—Ä–æ—Å–æ–≤

**–ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ**:
1. **Staging**: MinIO S3 –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç—Å—è
2. **DWH**: –ú–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ Greenplum (MPP –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞)
3. **Spark**: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ worker —É–∑–ª–æ–≤
4. **ClickHouse**: –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã (sharding)
5. **Kafka**: –£–≤–µ–ª–∏—á–µ–Ω–∏–µ –ø–∞—Ä—Ç–∏—Ü–∏–π —Ç–æ–ø–∏–∫–∞

**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è**:
- –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ Data Lake (Delta Lake/Iceberg)
- –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ hot/warm/cold –¥–∞–Ω–Ω—ã—Ö
- CDC (Change Data Capture) –≤–º–µ—Å—Ç–æ batch ETL

---

## –í–æ–ø—Ä–æ—Å—ã –ø–æ –¥–∞–Ω–Ω—ã–º

### Q9: –ü–æ—á–µ–º—É —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è, –∞ –Ω–µ –±–µ—Ä—É—Ç—Å—è –∏–∑ —Ä–µ–∞–ª—å–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã?

**–û—Ç–≤–µ—Ç**:
–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –ø—Ä–æ—Ç–æ—Ç–∏–ø–∞:
1. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞**: –≠—Ç–æ —É—á–µ–±–Ω—ã–π –ø—Ä–æ–µ–∫—Ç
2. **–ö–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ–º–æ—Å—Ç—å**: –ú–æ–∂–µ–º –∑–∞–¥–∞—Ç—å –Ω—É–∂–Ω—ã–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è
3. **–ü—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å**: –ù–µ—Ç –ø—Ä–æ–±–ª–µ–º —Å GDPR –∏ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
4. **–û–±—ä–µ–º**: –ú–æ–∂–µ–º –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω—É–∂–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ

**–í production**:
- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Ä–µ–∞–ª—å–Ω–æ–π OLTP –±–∞–∑–µ
- –ò–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ (CDC)
- –ê–Ω–æ–Ω–∏–º–∏–∑–∞—Ü–∏—è –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- Data Quality –ø—Ä–æ–≤–µ—Ä–∫–∏

### Q10: –ö–∞–∫ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç—Å—è –∫–∞—á–µ—Å—Ç–≤–æ –¥–∞–Ω–Ω—ã—Ö (Data Quality)?

**–û—Ç–≤–µ—Ç**:
**–¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è** (–±–∞–∑–æ–≤–∞—è):
1. **Constraints**: NOT NULL, CHECK, FK –≤ SQL
2. **Data types**: –°—Ç—Ä–æ–≥–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è –≤ Spark
3. **Load control**: –ú–µ—Ç—Ä–∏–∫–∏ –∑–∞–≥—Ä—É–∑–∫–∏ –≤ staging.load_control
4. **Manual checks**: SQL –∑–∞–ø—Ä–æ—Å—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏

**–î–ª—è production** (–Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å):
- **Great Expectations**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞
- **Reconciliation**: –°–≤–µ—Ä–∫–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∑–∞–ø–∏—Å–µ–π –º–µ–∂–¥—É —Å–ª–æ—è–º–∏
- **Business rules**: –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏ (–Ω–∞–ø—Ä., fare > 0)
- **Anomaly detection**: –í—ã—è–≤–ª–µ–Ω–∏–µ –∞–Ω–æ–º–∞–ª—å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π
- **Completeness checks**: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–ª–Ω–æ—Ç—ã –¥–∞–Ω–Ω—ã—Ö

---

## –í–æ–ø—Ä–æ—Å—ã –ø–æ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### Q11: –ü–æ—á–µ–º—É ClickHouse –±—ã—Å—Ç—Ä–µ–µ PostgreSQL –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏?

**–û—Ç–≤–µ—Ç**:
ClickHouse - –∫–æ–ª–æ–Ω–æ—á–Ω–∞—è –°–£–ë–î, –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –¥–ª—è OLAP:

| –ê—Å–ø–µ–∫—Ç | PostgreSQL (—Å—Ç—Ä–æ—á–Ω–∞—è) | ClickHouse (–∫–æ–ª–æ–Ω–æ—á–Ω–∞—è) |
|--------|----------------------|-------------------------|
| –•—Ä–∞–Ω–µ–Ω–∏–µ | –°—Ç—Ä–æ–∫–∞–º–∏ | –ö–æ–ª–æ–Ω–∫–∞–º–∏ |
| –°–∂–∞—Ç–∏–µ | –ù–∏–∑–∫–æ–µ (2-3x) | –í—ã—Å–æ–∫–æ–µ (10-100x) |
| –ß—Ç–µ–Ω–∏–µ | –ß–∏—Ç–∞–µ—Ç –≤—Å—é —Å—Ç—Ä–æ–∫—É | –ß–∏—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –Ω—É–∂–Ω—ã–µ –∫–æ–ª–æ–Ω–∫–∏ |
| –ê–≥—Ä–µ–≥–∞—Ü–∏—è | –ú–µ–¥–ª–µ–Ω–Ω–∞—è | –û—á–µ–Ω—å –±—ã—Å—Ç—Ä–∞—è (SIMD) |
| JOIN | –•–æ—Ä–æ—à | –°–ª–∞–±–µ–µ |

**–ü—Ä–∏–º–µ—Ä**: –ó–∞–ø—Ä–æ—Å `SELECT route_id, SUM(revenue) FROM fact_trips GROUP BY route_id`
- PostgreSQL: –ß–∏—Ç–∞–µ—Ç –≤—Å–µ –∫–æ–ª–æ–Ω–∫–∏ –≤—Å–µ—Ö —Å—Ç—Ä–æ–∫ ‚Üí –º–µ–¥–ª–µ–Ω–Ω–æ
- ClickHouse: –ß–∏—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ route_id –∏ revenue ‚Üí –±—ã—Å—Ç—Ä–æ

**–í—ã–≤–æ–¥**: 
- PostgreSQL –¥–ª—è OLTP –∏ moderate OLAP
- ClickHouse –¥–ª—è heavy OLAP (–º–∏–ª–ª–∏–∞—Ä–¥—ã —Å—Ç—Ä–æ–∫)

### Q12: –ö–∞–∫ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω—ã –∑–∞–ø—Ä–æ—Å—ã –∫ DWH?

**–û—Ç–≤–µ—Ç**:
**–ò–Ω–¥–µ–∫—Å—ã**:
- B-tree –Ω–∞ –≤—Å–µ—Ö FK (–∏–∑–º–µ—Ä–µ–Ω–∏—è)
- Composite –∏–Ω–¥–µ–∫—Å—ã –Ω–∞ —á–∞—Å—Ç—ã–µ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏
- Partial –∏–Ω–¥–µ–∫—Å—ã –Ω–∞ —Å—Ç–∞—Ç—É—Å—ã (WHERE status = 'active')

**–ü–∞—Ä—Ç–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ**:
- fact_trips –ø–æ –º–µ—Å—è—Ü–∞–º (start_date_key)
- fact_vehicle_positions –ø–æ –¥–Ω—è–º
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π partition pruning

**–ú–∞—Ç–µ—Ä–∏–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è**:
- –ü—Ä–µ–¥—Ä–∞—Å—á–∏—Ç–∞–Ω–Ω—ã–µ –∞–≥—Ä–µ–≥–∞—Ç—ã (mv_popular_routes_last_month)
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ REFRESH MATERIALIZED VIEW

**–î–µ–Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è**:
- Degenerate dimensions –≤ —Ñ–∞–∫—Ç–∞—Ö
- –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –∞—Ç—Ä–∏–±—É—Ç–æ–≤

---

## –í–æ–ø—Ä–æ—Å—ã –ø–æ Stream Processing

### Q13: –ü–æ—á–µ–º—É Flink, –∞ –Ω–µ Spark Structured Streaming?

**–û—Ç–≤–µ—Ç**:
Flink vs Spark Streaming:

| –ö—Ä–∏—Ç–µ—Ä–∏–π | Flink | Spark Structured Streaming |
|----------|-------|---------------------------|
| Latency | –ú–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥—ã | –°–µ–∫—É–Ω–¥—ã |
| State management | –û—Ç–ª–∏—á–Ω—ã–π | –•–æ—Ä–æ—à–∏–π |
| Exactly-once | –ù–∞—Ç–∏–≤–Ω—ã–π | –ß–µ—Ä–µ–∑ checkpointing |
| –û–∫–æ–Ω–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ | –û—á–µ–Ω—å –≥–∏–±–∫–∏–µ | –ì–∏–±–∫–∏–µ |
| –≠–∫–æ—Å–∏—Å—Ç–µ–º–∞ | –ú–µ–Ω—å—à–µ | –ë–æ–ª—å—à–µ (—É–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è —Å batch) |

**–í—ã–±–æ—Ä Flink**:
- –¢—Ä–µ–±—É–µ—Ç—Å—è low latency (< 1 —Å–µ–∫)
- –°–ª–æ–∂–Ω—ã–µ –æ–∫–æ–Ω–Ω—ã–µ –∞–≥—Ä–µ–≥–∞—Ü–∏–∏
- True streaming (–Ω–µ micro-batches)

**Spark Streaming –ª—É—á—à–µ**:
- –£–∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Spark –¥–ª—è batch
- –ù–µ –∫—Ä–∏—Ç–∏—á–Ω–∞ latency
- –ü—Ä–æ—â–µ –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ (–æ–¥–Ω–∞ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è)

### Q14: –ö–∞–∫ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è late events –≤ stream processing?

**–û—Ç–≤–µ—Ç**:
**–ü—Ä–æ–±–ª–µ–º–∞**: –°–æ–±—ã—Ç–∏—è –º–æ–≥—É—Ç –ø—Ä–∏—Ö–æ–¥–∏—Ç—å —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π –∏–∑-–∑–∞ —Å–µ—Ç–∏

**–†–µ—à–µ–Ω–∏–µ –≤ Flink**:
1. **Watermarks**: –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –≤—Ä–µ–º–µ–Ω–∏
2. **Allowed lateness**: –û–∫–Ω–æ –¥–µ—Ä–∂–∏—Ç—Å—è –æ—Ç–∫—Ä—ã—Ç—ã–º –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ –≤—Ä–µ–º—è
3. **Side outputs**: –ü–æ–∑–¥–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π –ø–æ—Ç–æ–∫ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏

```python
# –ü—Ä–∏–º–µ—Ä –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
stream.window(TumblingEventTimeWindows.of(Time.seconds(30))) \
      .allowedLateness(Time.minutes(5)) \
      .sideOutputLateData(late_output_tag)
```

**Trade-off**: –ë–æ–ª—å—à–µ lateness ‚Üí —Ç–æ—á–Ω–µ–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã, –Ω–æ –±–æ–ª—å—à–µ latency

---

## –í–æ–ø—Ä–æ—Å—ã –ø–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

### Q15: –ö–∞–∫ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç—Å—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö?

**–û—Ç–≤–µ—Ç**:
**–¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è** (–±–∞–∑–æ–≤–∞—è):
1. **Network isolation**: Docker network
2. **Access control**: PostgreSQL roles –∏ permissions
3. **Passwords**: –í –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è (–Ω–µ –≤ –∫–æ–¥–µ)

**–î–ª—è production** (–∫—Ä–∏—Ç–∏—á–Ω–æ):
- **Encryption at rest**: –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –Ω–∞ –¥–∏—Å–∫–µ
- **Encryption in transit**: SSL/TLS –¥–ª—è –≤—Å–µ—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
- **Secret management**: HashiCorp Vault –∏–ª–∏ AWS Secrets Manager
- **RBAC**: Role-Based Access Control –¥–ª—è –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- **Audit logging**: –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –¥–æ—Å—Ç—É–ø–æ–≤ –∫ –¥–∞–Ω–Ω—ã–º
- **Data masking**: –ú–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–∏–µ PII –¥–∞–Ω–Ω—ã—Ö
- **Backup & Recovery**: –†–µ–≥—É–ª—è—Ä–Ω—ã–µ backup'—ã

### Q16: –ö–∞–∫ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç—Å—è GDPR compliance?

**–û—Ç–≤–µ—Ç**:
**–î–ª—è GDPR —Ç—Ä–µ–±—É–µ—Ç—Å—è**:
1. **Right to be forgotten**: –£–¥–∞–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ –∑–∞–ø—Ä–æ—Å—É
2. **Data minimization**: –•—Ä–∞–Ω–∏—Ç—å —Ç–æ–ª—å–∫–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–∞–Ω–Ω—ã–µ
3. **Anonymization**: –û–±–µ–∑–ª–∏—á–∏–≤–∞–Ω–∏–µ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
4. **Audit trail**: –ò—Å—Ç–æ—Ä–∏—è –¥–æ—Å—Ç—É–ø–∞ –∫ –ª–∏—á–Ω—ã–º –¥–∞–Ω–Ω—ã–º
5. **Consent management**: –•—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ–≥–ª–∞—Å–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

**–í –Ω–∞—à–µ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ**:
- **Soft delete**: UPDATE users SET status = 'deleted' –≤–º–µ—Å—Ç–æ DELETE
- **Cascading**: FK —Å ON DELETE CASCADE –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ —É–¥–∞–ª–µ–Ω–∏—è
- **Anonymization**: –ó–∞–º–µ–Ω—è—Ç—å email/phone –Ω–∞ —Ö—ç—à–∏ –ø–µ—Ä–µ–¥ DWH
- **Retention policy**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä—ã—Ö –¥–∞–Ω–Ω—ã—Ö

---

## –í–æ–ø—Ä–æ—Å—ã –ø–æ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥—É

### Q17: –ö–∞–∫ –º–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã?

**–û—Ç–≤–µ—Ç**:
**–ß—Ç–æ –º–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å**:
1. **Infrastructure**: CPU, Memory, Disk I/O (Docker stats)
2. **ETL pipelines**: –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π
3. **Data Quality**: –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—à–∏–±–æ–∫, –¥—É–±–ª–∏–∫–∞—Ç–æ–≤, NULL –∑–Ω–∞—á–µ–Ω–∏–π
4. **Business metrics**: –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–µ–∑–¥–æ–∫, –≤—ã—Ä—É—á–∫–∞, –∞–∫—Ç–∏–≤–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏

**–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã** (–¥–ª—è production):
- **Prometheus**: –°–±–æ—Ä –º–µ—Ç—Ä–∏–∫
- **Grafana**: –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –¥–∞—à–±–æ—Ä–¥–æ–≤
- **Alertmanager**: –û—Ç–ø—Ä–∞–≤–∫–∞ –∞–ª–µ—Ä—Ç–æ–≤
- **ELK Stack**: –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

**–ü—Ä–∏–º–µ—Ä—ã –º–µ—Ç—Ä–∏–∫**:
```
# ETL
etl_duration_seconds{job="load_trips"}
etl_rows_processed{job="load_trips", status="success"}

# DWH
dwh_table_size_bytes{table="fact_trips"}
dwh_query_duration_seconds{query_type="aggregate"}

# Business
daily_active_users
total_revenue
avg_trip_duration_minutes
```

---

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–≠—Ç–∏ –≤–æ–ø—Ä–æ—Å—ã –∏ –æ—Ç–≤–µ—Ç—ã –ø–æ–∫—Ä—ã–≤–∞—é—Ç –æ—Å–Ω–æ–≤–Ω—ã–µ –∞—Å–ø–µ–∫—Ç—ã –ø—Ä–æ–µ–∫—Ç–∞. –î–ª—è –±–æ–ª–µ–µ –≥–ª—É–±–æ–∫–æ–≥–æ –ø–æ–Ω–∏–º–∞–Ω–∏—è:

üìñ **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: `docs/architecture.md`, `docs/QUICKSTART.md`
üíª **–ö–æ–¥**: –í—Å–µ —Å–∫—Ä–∏–ø—Ç—ã —Ö–æ—Ä–æ—à–æ –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã
üìä **–ü—Ä–∏–º–µ—Ä—ã**: `docs/sample_queries.sql`

**–ì–æ—Ç–æ–≤—ã –∫ –≤–æ–ø—Ä–æ—Å–∞–º –Ω–∞ –∑–∞—â–∏—Ç–µ!** üöÄ

